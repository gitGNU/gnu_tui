#!/bin/bash
# Copyright (c) 2015 Simon Arjuna Erat (sea)  <erat.simon@gmail.com>
# All rights reserved.
#
# This program is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published
# by the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>
#
#	Project Settings
#
	APP=tui
	APP_LIC="GPLv3+"
	APP_TITLE="Text User Interface, framework for scripts"
	APP_VER="$(\gawk -F= '/TUI_VERSION/ {print $2}' bin/tuirc)"
	APP_REQUIRES="gawk bash gettext grep sed"
	#CFG_REQUIRES="texi2any txt2man"
	doRef=true
	doMakefile=true
	# Visit & Download
 	APP_URL="https://github.com/sri-arjuna/$APP"
 	DOWNLOAD="$APP_URL/archive/v${APP_VER}.tar.gz"
	APP_GIT="$APP_URL.git"
	# Author & License
	APP_AUTHOR="Simon Arjuna Erat (sea)"
	APP_EMAIL="erat.simon@gmail.com"
	APP_HOMEPAGE="http://savannah.nongnu.org/projects/tui"	# Doesnt work yet, dont know how/where to upload files
	APP_HOMEPAGE="http://linux-scripter.blogspot.com"
#
#	Targets
#
	BINDIR=bin
	SYSCONFDIR="./conf.tui ./tuirc"
	DOCDIR="[CT]* docs/[ACGILNR]* docs/tex/*.html"
	MAN1DIR=manpages
	INFODIR="docs/tex/$APP.info docs/tex/fdl.info"
	DATADIR="./conf.home ./lists ./locale ./docs/samples ./templates ./themes" ## ./struct
	COMPLDIR=compl
#
#	Preparations
#
	MAKE[0]="scripts/prepare.sh"
	MAKE[1]="source ./$REFERENCE; source ./tuirc ; for f in conf.tui/*conf;do source \$f;done"
	##
	##	Docs are now provided, no need to generate before installing
	##
	#MAKE[2]="mkdir out.man;for f in bin/*;do \$f -h 2>/dev/zero| txt2man -v \"TUI Manual\" -t \"\${f##*/}\" -s 1 -r \"TUI $APP_VER\" > out.man/\${f##*/}.1 2>/dev/zero;done"
	
	# Docs - Texinfo
	#TEXI[0]="docs/tex/tui.texi docs/tex"
	#TEXI[1]="docs/tex/fdl.texi docs/tex"
	
	# Docs - HTML
	#HTML[0]="docs/tex/tui.texi docs/tex"
	#HTML[1]="docs/tex/fdl.texi docs/tex"
#
#	Finetuning
#
	# Making them on two lines, helps if it is just an update and not just on fresh installations
	POST[0]="[ ! -d \${CHROOT}\$SYSCONFDIR/tui ] && mkdir -p \${CHROOT}\$SYSCONFDIR/tui"
	POST[1]="mv \${CHROOT}\$SYSCONFDIR/conf.tui/* \${CHROOT}\$SYSCONFDIR/tui && rmdir \${CHROOT}\$SYSCONFDIR/conf.tui"
#
#	Removals
#
	# make-distclean
	CLEAN[0]="rm -f tuirc"
	CLEAN[1]="rm -fr out.man"
	#CLEAN[2]="rm -f docs/tex/*.info"
	#CLEAN[3]="rm -f docs/tex/*.html"
	# make-uninstall additions
	REMOVE[0]="[ -d \${CHROOT}\$SYSCONFDIR/tui ] && rm -fr \${CHROOT}\$SYSCONFDIR/tui"
	REMOVE[0]="[ -f \${CHROOT}\$SYSCONFDIR/tuirc ] && rm -f \${CHROOT}\$SYSCONFDIR/tuirc"
#
#	Ignore for Tarball
#
	IGNORE[0]=".git"
	IGNORE[1]="scripts"
	IGNORE[2]="TODO"
#
#	Contact
#
	BUGS="tui-support@nongnu.org"
